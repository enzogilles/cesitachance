# Activer le moteur de réécriture
RewriteEngine On

# Définir la base URL pour la réécriture
RewriteBase /cesitachance/

# Rediriger les URL publiques vers les URL propres (règle améliorée)
RewriteCond %{THE_REQUEST} \s/+cesitachance/public/index\.php\?controller=([^&]+)&action=([^&\s]+) [NC]
RewriteRule ^ /cesitachance/%1/%2? [R=301,L]

# Réécrire les URLs propres
# Règle pour /offre pour action=index
RewriteRule ^offre/?$ public/index.php?controller=offre&action=index [QSA,L]

# Règle pour /offre/index convertir en action=index
RewriteRule ^offre/index/?$ public/index.php?controller=offre&action=index [QSA,L]

# Règle pour /offre/{id} pour action=detail
RewriteRule ^offre/([0-9]+)/?$ public/index.php?controller=offre&action=detail&id=$1 [QSA,L]

# Règle générique pour /controller/action
RewriteRule ^([^/]+)/([^/]+)/?$ public/index.php?controller=$1&action=$2 [QSA,L]

# Rediriger toutes les autres requêtes vers le fichier index.php
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ public/index.php [QSA,L]

